<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <title>üîê Alterar Acesso</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet" />
  <style>
    :root{
      --primary:#3498db;
      --secondary:#2c3e50;
      --bg:#f4f7f9;
      --card:#ffffff;
      --text:#333;
      --muted:#6b7280;
      --line:#e5e7eb;
      --ok-bg:#d1e7dd; --ok-border:#badbcc; --ok-text:#0f5132;
      --err-bg:#f8d7da; --err-border:#f5c2c7; --err-text:#842029;
    }

    *{ box-sizing: border-box }
    html,body{ margin:0 }
    body{
      font-family: 'Roboto', system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
      background: var(--bg); color: var(--text);
      min-height: 100vh; display:flex; align-items:center; justify-content:center; padding:24px;
    }

    .container{
      width:100%; max-width:520px;
      background:var(--card);
      border:1px solid var(--line);
      border-radius:14px;
      box-shadow:0 10px 28px rgba(0,0,0,.06);
      padding:28px 24px;
    }

    .header{
      display:flex; align-items:center; justify-content:space-between; gap:10px; margin-bottom:14px;
    }
    .title{
      margin:0; font-weight:700; font-size:22px; color:var(--secondary); letter-spacing:.2px;
      display:flex; align-items:center; gap:8px;
    }

    .back-link{
      appearance:none; border:1px solid var(--line); background:#fff; color:#111827;
      padding:8px 12px; border-radius:10px; font-weight:600; text-decoration:none; font-size:14px;
    }

    .intro{ margin:8px 0 18px; color:var(--muted); font-size:14px }

    /* Mensagens Django */
    .messages{ margin:0 0 16px 0; padding:0; list-style:none }
    .msg{
      border-radius:10px; padding:12px 14px; border:1px solid transparent; font-weight:500; margin-bottom:10px;
    }
    .success{ background:var(--ok-bg); border-color:var(--ok-border); color:var(--ok-text) }
    .error{ background:var(--err-bg); border-color:var(--err-border); color:var(--err-text) }

    /* Form */
    form{ display:grid; gap:14px; margin-top:4px }
    form p{ margin:0 } /* compat√≠vel com form.as_p */

    label{ display:block; font-weight:500; color:var(--secondary); margin:0 0 6px }
    input, select{
      width:100%; padding:12px 40px 12px 12px; /* espa√ßo p/ √≠cone de senha */
      border:1px solid var(--line); border-radius:10px; background:#f9fafb; color:var(--text);
      font-size:15px; transition:border-color .2s, box-shadow .2s;
    }
    input:focus, select:focus{
      border-color:var(--primary); outline:0;
      box-shadow:0 0 0 3px rgba(52,152,219,.15);
      background:#fff;
    }

    /* Campo de senha com bot√£o revelar */
    .password-field{ position:relative }
    .toggle-eye{
      position:absolute; right:8px; top:50%; transform:translateY(-50%);
      border:none; background:transparent; cursor:pointer; font-size:18px; line-height:1;
      color:#7b8694; padding:4px; border-radius:8px;
    }
    .toggle-eye:hover{ background:#eef2f7 }

    /* Bot√£o principal */
    .btn{
      margin-top:6px;
      appearance:none; border:0; border-radius:10px;
      padding:12px 16px; font-weight:700; cursor:pointer; font-size:16px;
      background:var(--primary); color:#fff; box-shadow:0 6px 16px rgba(52,152,219,.25);
      transition:filter .2s, transform .03s ease-in;
    }
    .btn:hover{ filter:brightness(.97) }
    .btn:active{ transform:translateY(1px) }
    .btn[disabled]{ opacity:.7; cursor:not-allowed }

    /* Erros de campo do Django */
    .errorlist{ margin:6px 0 0; padding-left:18px; color:var(--err-text); font-size:13px }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1 class="title">üîê Alterar Acesso</h1>
      <a class="back-link" href="javascript:history.back()">Voltar</a>
    </div>
    <p class="intro">Atualize suas credenciais com seguran√ßa. Use uma senha forte e exclusiva.</p>

    {% if messages %}
      <ul class="messages">
        {% for message in messages %}
          <li class="msg {% if message.tags %}{{ message.tags }}{% endif %}">{{ message }}</li>
        {% endfor %}
      </ul>
    {% endif %}

    <form method="post" novalidate>
      {% csrf_token %}
      {{ form.as_p }}
      <button class="btn" type="submit">üíæ Salvar altera√ß√µes</button>
    </form>
  </div>

  <script>
    // Envolve inputs de senha e adiciona bot√£o de mostrar/ocultar
    (function(){
      const inputs = document.querySelectorAll('input[type="password"]');
      inputs.forEach((inp) => {
        const wrapper = document.createElement('div');
        wrapper.className = 'password-field';
        inp.parentNode.insertBefore(wrapper, inp);
        wrapper.appendChild(inp);

        const btn = document.createElement('button');
        btn.type = 'button';
        btn.className = 'toggle-eye';
        btn.setAttribute('aria-label', 'Mostrar/ocultar senha');
        btn.textContent = 'üëÅÔ∏è';
        btn.addEventListener('click', () => {
          const isPwd = inp.type === 'password';
          inp.type = isPwd ? 'text' : 'password';
          btn.textContent = isPwd ? 'üôà' : 'üëÅÔ∏è';
        });
        wrapper.appendChild(btn);
      });

      // Evita duplo envio
      const form = document.querySelector('form');
      if(form){
        form.addEventListener('submit', () => {
          const submit = form.querySelector('button[type="submit"]');
          if(submit){ submit.setAttribute('disabled','disabled'); }
        });
      }
    })();
  </script>
</body>
</html>
