{% load static widget_tweaks %}
<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <title>{% if is_edit %}Editar{% else %}Novo{% endif %} Ministério — {{ evento.nome }}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"/>

  <style>
    :root{ --ink:#0f172a; --muted:#64748b; --g1:#0b1020; --g2:#111a3a; --line:#e5e7eb; --base-font:14px; }
    html{ font-size:var(--base-font) } body{ background:#f6f8fb; color:var(--ink) }
    .nav-pro{ background:linear-gradient(90deg,var(--g1),var(--g2)) }
    .navbar .btn{ font-size:.85rem; padding:.35rem .6rem } .navbar-brand{ font-size:1rem }
    .sticky-topbar{ position:sticky; top:0; z-index:20; background:#ffffffd6; backdrop-filter:blur(6px); border:1px solid var(--line); border-radius:.9rem }
    .text-muted-2{ color:var(--muted) } .btn-sm,.btn.btn-sm{ font-size:.8rem; padding:.35rem .6rem }
    .card-clean{ border:1px solid var(--line); border-radius:.95rem; background:#fff; box-shadow:0 10px 24px rgba(17,24,39,.08) }
    .sec-title{ font-size:.9rem; color:var(--muted); text-transform:uppercase; letter-spacing:.04em; margin:0 0 .75rem; font-weight:700 }
    .form-control, .form-select, textarea{ border:1px solid var(--line); border-radius:.6rem }
  </style>
</head>
<body>
<nav class="navbar nav-pro navbar-dark">
  <div class="container-fluid">
    <a class="navbar-brand fw-bold" href="{% url 'inscricoes:ministerios_evento' evento.id %}">
      <i class="fa-solid fa-arrow-left me-2"></i> Ministérios
    </a>
    <span class="navbar-text text-white-50 d-none d-md-inline">{{ evento.nome }}</span>
    <div class="d-flex align-items-center gap-2 ms-auto">
      <a class="btn btn-sm btn-light" href="{% url 'inscricoes:ministerios_evento' evento.id %}">Cancelar</a>
      <button type="submit" form="form-ministerio" class="btn btn-sm btn-warning">
        <i class="fa-solid fa-floppy-disk me-1"></i> Salvar
      </button>
    </div>
  </div>
</nav>

<main class="container py-3 py-lg-4">
  <div class="sticky-topbar p-3 mb-3">
    <div class="d-flex justify-content-between align-items-center">
      <div>
        <h1 class="h6 m-0">{% if is_edit %}Editar{% else %}Novo{% endif %} Ministério</h1>
        <div class="small text-muted-2">{{ evento.nome }}</div>
      </div>
    </div>
  </div>

  {% if messages %}
  <div class="mb-3">
    {% for message in messages %}
      <div class="alert {% if 'error' in message.tags %}alert-danger{% elif 'success' in message.tags %}alert-success{% elif 'warning' in message.tags %}alert-warning{% else %}alert-info{% endif %} mb-2">{{ message }}</div>
    {% endfor %}
  </div>
  {% endif %}

  <form id="form-ministerio" method="post" class="card-clean p-3 p-md-4" novalidate>
    {% csrf_token %}
    {% if form.non_field_errors %}
      <div class="alert alert-danger mb-3">
        {% for err in form.non_field_errors %}{{ err }}{% if not forloop.last %}<br>{% endif %}{% endfor %}
      </div>
    {% endif %}

    <h2 class="sec-title"><i class="fa-solid fa-sliders me-1"></i> Dados do Ministério</h2>
    <div class="row g-3">
      <div class="col-12 col-md-6">
        <label for="{{ form.nome.id_for_label }}" class="form-label fw-bold text-muted-2">Nome</label>
        {% render_field form.nome class+="form-control" aria-invalid=form.nome.errors|yesno:"true,false" %}
        {% if form.nome.errors %}<div class="text-danger small mt-1">{{ form.nome.errors.0 }}</div>{% endif %}
      </div>
      <div class="col-12">
        <label for="{{ form.descricao.id_for_label }}" class="form-label fw-bold text-muted-2">Descrição</label>
        {% render_field form.descricao class+="form-control" rows="4" aria-invalid=form.descricao.errors|yesno:"true,false" %}
        {% if form.descricao.errors %}<div class="text-danger small mt-1">{{ form.descricao.errors.0 }}</div>{% endif %}
      </div>
    </div>

    <div class="d-flex justify-content-end gap-2 mt-3">
      <a href="{% url 'inscricoes:ministerios_evento' evento.id %}" class="btn btn-outline-dark">Cancelar</a>
      <button type="submit" class="btn btn-primary">
        <i class="fa-solid fa-floppy-disk me-1"></i> Salvar
      </button>
    </div>
  </form>

  <footer class="py-3">
    <div class="d-flex justify-content-between align-items-center">
      <small>© {% now "Y" %}</small>
      <small class="text-muted-2">Desenvolvido por Alexandre Martins Vieira • Bootstrap 5</small>
    </div>
  </footer>
</main>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
